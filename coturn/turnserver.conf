# TURN Server Configuration for Quickshare
# Production-ready configuration with security best practices

# Network Configuration
listening-port=3478
tls-listening-port=5349
listening-ip=0.0.0.0

# External IP - MUST be set to your server's public IP in production
# Example: external-ip=203.0.113.1
# For Docker, you may need to use: external-ip=$(curl -s ifconfig.me)
external-ip=YOUR_EXTERNAL_IP_HERE

# Realm and Server Name
realm=quickshare-turn
server-name=quickshare-turn

# Authentication
# Use long-term credentials mechanism
lt-cred-mech
use-auth-secret
# Static auth secret - MUST be changed in production
# Generate with: openssl rand -hex 32
static-auth-secret=change-this-in-production-generate-with-openssl-rand-hex-32

# Security Settings
# Disable multicast peers (not needed for P2P file sharing)
no-multicast-peers
# Disable CLI (command line interface) for security
no-cli
# Disable TCP relay (we only need UDP for WebRTC)
no-tcp-relay

# Deny private IP ranges to prevent abuse
denied-peer-ip=0.0.0.0-0.255.255.255
denied-peer-ip=127.0.0.0-127.255.255.255
denied-peer-ip=169.254.0.0-169.254.255.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=10.0.0.0-10.255.255.255

# Performance and Resource Limits
# Total quota per user (in MB per hour)
total-quota=100
# Stale nonce timeout (seconds)
stale-nonce=600
# Maximum number of sessions per user
max-allocate-lifetime=3600
# Maximum bandwidth per session (bytes per second)
max-bps=10000000

# Logging
# Log level: 0=minimal, 1=moderate, 2=verbose, 3=very verbose
log-file=stdout
verbose

# Fingerprint (for STUN/TURN protocol compliance)
fingerprint

# Use relay-ip if behind NAT
# relay-ip=YOUR_INTERNAL_IP

# User database (optional, if using dynamic users)
# userdb=/etc/turnuserdb.conf

# Certificate and TLS (if using TLS)
# cert=/path/to/cert.pem
# pkey=/path/to/key.pem

